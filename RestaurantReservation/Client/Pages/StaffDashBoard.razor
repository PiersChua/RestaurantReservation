@page "/staff"
@inject HttpClient _client
@inject IJSRuntime js
@inject NavigationManager _navManager
@layout StaffLayout

<section class="home-section">
    <div class="home-content">
        <div class="overview-boxes">
        <div class="box">
            <div class="right-side">
                    <div class="box-topic">Still thinking</div>
            <div class="number">40,876</div>
            <div class="indicator">
                <i class='bx bx-up-arrow-alt'></i>
            </div>
            </div>
            <i class='bx bx-cart-alt cart'></i>
        </div>
        <div class="box">
            <div class="right-side">
                    <div class="box-topic">Still thinking</div>
            <div class="number">38,876</div>
            <div class="indicator">
                <i class='bx bx-up-arrow-alt'></i>
            </div>
            </div>
            <i class='bx bxs-cart-add cart two' ></i>
        </div>
        <div class="box">
            <div class="right-side">
                    <div class="box-topic">Still thinking</div>
            <div class="number">$12,876</div>
            <div class="indicator">
                <i class='bx bx-up-arrow-alt'></i>
            </div>
            </div>
            <i class='bx bx-cart cart three' ></i>
        </div>
        <div class="box">
            <div class="right-side">
            <div class="box-topic">Still thinking</div>
            <div class="number">11,086</div>
            <div class="indicator">
                <i class='bx bx-down-arrow-alt down'></i>
            </div>
            </div>
            <i class='bx bxs-cart-download cart four' ></i>
        </div>
        </div>
        <div class="sales-boxes">
            <div class="recent-sales box">
                <div class="title">Restaurants</div>


                <div class="sales-details">
                    <ul class="details">
                        <li class="topic">Name</li>
                        @if (restaurants != null)
                        {
                            foreach (var R in restaurants)
                            {
                                <li>@R.Name</li>
                            }
                        }

                    </ul>
                    <ul class="details">
                        <li class="topic">Contact</li>
                        @if (restaurants != null)
                        {
                            @foreach (var R in restaurants)
                            {
                                <li>@R.PhoneNumber</li>
                            }
                        }
                    </ul>
                    <ul class="details">
                        <li class="topic">Email</li>
                        @if (restaurants != null)
                        {
                            @foreach (var R in restaurants)
                            {
                                <li>@R.Email</li>
                            }
                        }
                    </ul>
                    <ul class="details">
                        <li class="topic">Status</li>
                        @if (restaurants != null)
                        {
                            @foreach (var R in restaurants)
                            {
                                <li>@R.Status</li>
                            }
                        }
                    </ul>
                </div>
                    

            </div>
        <div class="top-sales box">
            <div class="title">Application Require Approval</div>
            <ul class="sales-details">
           
                <ul class="details">
                    <li class="topic">Name</li>
                    @if (restaurantapp != null)
                    {
                        @foreach (var RA in restaurantapp)
                        {
                            <li>@RA.RestaurantName</li>
                        }
                    }
                </ul>
                <ul class="details">
                    <li class="topic">Status</li>
                    @if (restaurantapp != null)
                    {
                        @foreach (var RA in restaurantapp)
                        {
                            <li>@RA.Status</li>
                        }
                    }
                </ul>

            </ul>
        </div>
        </div>
    </div>
</section>


@code {
    private List<Restaurant>? restaurants;
    private List<RestaurantApplication>? restaurantapp;

    protected async override Task OnInitializedAsync()
    {
        restaurants = await _client.GetFromJsonAsync<List<Restaurant>>($"{Endpoints.RestaurantsEndpoint}");
        restaurantapp = await _client.GetFromJsonAsync<List<RestaurantApplication>>($"{Endpoints.RestaurantApplicationsEndpoint}");

    }
}
